#!/bin/bash

# This script generates one page of html documentation of an xquery module
#
# usage:
#
# > xquerydoc /som/xquery/file.xq /some/output/html.html
#
#

XQUERYDOC_HOME=/Users/jfuller/Source/Webcomposite/xquerydoc

CURRENTDIR=`pwd`
XQUERY=$1
OUTPUT=$2
FORMAT=$3

# create output directory
mkdir $OUTPUT

# run xproc pipeline
/usr/local/bin/calabash -oresult=$OUTPUT/index.html $XQUERYDOC_HOME/xquerydoc.xpl xquery=$XQUERY output=$OUTPUT currentdir=$CURRENTDIR format=$FORMAT exclude= include=

# copy lib resources 
cp -R -f $XQUERYDOC_HOME/src/lib $OUTPUT/lib
